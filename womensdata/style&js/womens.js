var womensData = [{
    image_url: "https://images-cdn.ubuy.co.in/654dc532627d0b3e301a6825-bell-bottom-jeans-for-women-high-waisted.jpg",
    brand: "Chevron",
    para: "Light Blue Bell Bottoms",
    rs: 791,
    price: "Rs. 1391",
    strikedoffprice: "Rs. 2399",
    offer: "(42% OFF)",
    wishList: "Add to collection ♡",
    addToBag: "ADD TO BAG",
},
{
    image_url: "https://bit.ly/3uLGTyi",
    brand: "Anouk",
    para: "Women yellow Self Design Kurta with Trousers & Dupatta",
    rs: 758,
    price: "Rs. 758",
    strikedoffprice: "Rs. 3299",
    offer: "(65% OFF)",
    wishList: "Add to collection ♡",
    addToBag: "ADD TO BAG",
},
{
    image_url: "https://bit.ly/3Dldqit",
    brand: "Anouk",
    para: "Green Ethnic Motifs Pure Cotton Printed Fit and Flare Dress",
    rs: 749,
    price: "Rs. 749",
    strikedoffprice: "Rs. 1299",
    offer: "(65% OFF)",
    wishList: "Add to collection ♡",
    addToBag: "ADD TO BAG",
},
{
    image_url: "https://bit.ly/3iNMWwx",
    brand: "Chevron",
    para: "Black & Grey Chevron Geometric Printed Wrap Dress",
    rs: 1199,
    price: "Rs. 1199",
    strikedoffprice: "Rs. 2599",
    offer: "(65% OFF)",
    wishList: "Add to collection ♡",
    addToBag: "ADD TO BAG",
},
{
    image_url: "https://bit.ly/3IQuE8v",
    brand: "Anouk",
    para: "Women Olive Green Ethnic Motifs Yoke Design Kurta with Palazzos & With Dupatta",
    rs: 879,
    price: "Rs. 879",
    strikedoffprice: "Rs. 2499",
    offer: "(65% OFF)",
    wishList: "Add to collection ♡",
    addToBag: "ADD TO BAG",
},
{
    image_url: "https://bit.ly/3IRLbJa",
    brand: "MFB",
    para: "Women Maroon Analogue Watch MFB-PN-SNT-C30-1",
    rs: 674,
    price: "Rs. 674",
    strikedoffprice: "Rs. 1499",
    offer: "(65% OFF)",
    wishList: "Add to collection ♡",
    addToBag: "ADD TO BAG",
},
{
    image_url: "https://bit.ly/3wYoUqM",
    brand: "Anouk",
    para: "Women Black Pure Cotton Ethnic Motifs Printed Kurta with Palazzos & Dupatta",
    rs: 1035,
    price: "Rs. 1035",
    strikedoffprice: "Rs. 2799",
    offer: "(63% OFF)",
    wishList: "Add to collection ♡",
    addToBag: "ADD TO BAG",
},
{
    image_url: "https://bit.ly/3wXtNAx",
    brand: "Nayo",
    para: "Women Red Floral Printed Kurta With Trouser & Dupatta",
    rs: 1479,
    price: "Rs. 1479",
    strikedoffprice: "Rs. 3699",
    offer: "(60% OFF)",
    wishList: "Add to collection ♡",
    addToBag: "ADD TO BAG",
},
{
    image_url: "https://bit.ly/37aGnRW",
    brand: "Yash gallery",
    para: "Women Blue & White Printed A-Line Kurta",
    rs: 805,
    price: "Rs. 805",
    strikedoffprice: "Rs. 1299",
    offer: "(65% OFF)",
    wishList: "Add to collection ♡",
    addToBag: "ADD TO BAG",
},
{
    image_url: "https://bit.ly/3wUyQli",
    brand: "Juniper",
    para: "Women Charming Maroon Ethnic Motifs Bling It On Dress",
    rs: 489,
    price: "Rs. 489",
    strikedoffprice: "Rs. 999",
    offer: "(65% OFF)",
    wishList: "Add to collection ♡",
    addToBag: "ADD TO BAG",
},
{
    image_url: "https://bit.ly/3uMmnxi",
    brand: "Sngria",
    para: "Black& Mustard Yellow Pure Cotton Ethnic Motifs Printed A-Line Dress",
    rs: 799,
    price: "Rs. 799",
    strikedoffprice: "Rs. 1199",
    offer: "(65% OFF)",
    wishList: "Add to collection ♡",
    addToBag: "ADD TO BAG",
},
{
    image_url: "https://bit.ly/3IZknGX",
    brand: "Juniper",
    para: "Women Black & Gold-Toned Printed Flared Palazzos",
    rs: 883,
    price: "Rs. 883",
    strikedoffprice: "Rs. 1699",
    offer: "(43% OFF)",
    wishList: "Add to collection ♡",
    addToBag: "ADD TO BAG",
},
{
    image_url: "https://bit.ly/35xpQr3",
    brand: "Juniper",
    para: "Women Lime Green & White Striped Flared Palazzos",
    rs: 594,
    price: "Rs. 594",
    strikedoffprice: "Rs. 1699",
    offer: "(65% OFF)",
    wishList: "Add to collection ♡",
    addToBag: "ADD TO BAG",
},
{
    image_url: "https://bit.ly/3iUMb4X",
    brand: "Juniper",
    para: "Women Off-White & Gold-Coloured Printed Flared Palazzos",
    rs: 499,
    price: "Rs. 499",
    strikedoffprice: "Rs. 1249",
    offer: "(65% OFF)",
    wishList: "Add to collection ♡",
    addToBag: "ADD TO BAG",
},
{
    image_url: "https://bit.ly/36I0Myd",
    brand: "Juniper",
    para: "Women White Chikankari Embroidered Flared Palazzos",
    rs: 997,
    price: "Rs. 997",
    strikedoffprice: "Rs. 2850",
    offer: "(65% OFF)",
    wishList: "Add to collection ♡",
    addToBag: "ADD TO BAG",
},
{
    image_url: "https://bit.ly/3DwTnO0",
    brand: "Arrabi",
    para: "Women Blue Ethnic Motifs Embroidered Knitted Cropped Ethnic Palazzos",
    rs: 554,
    price: "Rs. 554",
    strikedoffprice: "Rs. 1499",
    offer: "(65% OFF)",
    wishList: "Add to collection ♡",
    addToBag: "ADD TO BAG",
},
{
    image_url: "https://bit.ly/3v7U4K7",
    brand: "Juniper",
    para: "Maroon Embroidered Semi-Stitched Lehenga & Unstitched Blouse with Dupatta",
    rs: 3999,
    price: "Rs. 3999",
    strikedoffprice: "Rs. 10000",
    offer: "(Rs. 60001 OFF)",
    wishList: "Add to collection ♡",
    addToBag: "ADD TO BAG",
},
{
    image_url: "https://bit.ly/3iXV6Cw",
    brand: "Juniper",
    para: "Beige & Golden Embellished Sequinned Semi-Stitched Lehenga Set",
    rs: 5100,
    price: "Rs. 5100",
    strikedoffprice: "Rs. 6800",
    offer: "(25% OFF)",
    wishList: "Add to collection ♡",
    addToBag: "ADD TO BAG",
},
{
    image_url: "https://bit.ly/3DvsXfI",
    brand: "Chevron",
    para: "Black Embellished Sequinned Semi-Stitched Lehenga & Unstitched Blouse With Dupatta",
    rs: 2457,
    price: "Rs. 2457",
    strikedoffprice: "Rs. 3330",
    offer: "(25% OFF)",
    wishList: "Add to collection ♡",
    addToBag: "ADD TO BAG",
},
{
    image_url: "https://bit.ly/3wYy1Im",
    brand: "Chevron",
    para: "Pink Embellished Sequinned Semi-Stitched Lehenga & Unstitched Blouse With Dupatta",
    rs: 2319,
    price: "Rs. 2319",
    strikedoffprice: "Rs. 7999",
    offer: "(71% OFF)",
    wishList: "Add to collection ♡",
    addToBag: "ADD TO BAG",
},
{
    image_url: "https://bit.ly/35wbrLE",
    brand: "Chevron",
    para: "24K Gold-Plated White & Red Stone-Studded Beaded Jewellery Set",
    rs: 2080,
    price: "Rs. 2080",
    strikedoffprice: "Rs. 6500",
    offer: "(20% OFF)",
    wishList: "Add to collection ♡",
    addToBag: "ADD TO BAG",
},
{
    image_url: "https://bit.ly/3DvtdeG",
    brand: "Chevron",
    para: "Gold-Plated Pink & Green Enamelled Beaded Kundan-Studded Handcrafted Jewellery Set",
    rs: 4448,
    price: "Rs. 4448",
    strikedoffprice: "Rs. 6390",
    offer: "(65% OFF)",
    wishList: "Add to collection ♡",
    addToBag: "ADD TO BAG",
},
{
    image_url: "https://bit.ly/3wVpBRV",
    brand: "Chevron",
    para: "Gold-Toned & Pink CZ Stone-Studded Jewellery Set",
    rs: 539,
    price: "Rs. 539",
    strikedoffprice: "Rs. 2998",
    offer: "(65% OFF)",
    wishList: "Add to collection ♡",
    addToBag: "ADD TO BAG",
},
{
    image_url: "https://bit.ly/3wUhtRH",
    brand: "Chevron",
    para: "Green & Pink Gold-Plated Kundan-Studded Handcrafted Jewellery Set",
    rs: 894,
    price: "Rs. 894",
    strikedoffprice: "Rs. 2360",
    offer: "(65% OFF)",
    wishList: "Add to collection ♡",
    addToBag: "ADD TO BAG",
},
{
    image_url: "https://bit.ly/3Dv4h6W",
    brand: "MFB",
    para: "Mustard Yellow & Red Bandhani Print Saree",
    rs: 1799,
    price: "Rs. 1799",
    strikedoffprice: "Rs. 2199",
    offer: "(65% OFF)",
    wishList: "Add to collection ♡",
    addToBag: "ADD TO BAG",
},
{
    image_url: "https://bit.ly/3NGRzXv",
    brand: "Sangria",
    para: "Navy Blue Solid Saree",
    rs: 489,
    price: "Rs. 489",
    strikedoffprice: "Rs. 999",
    offer: "(65% OFF)",
    wishList: "Add to collection ♡",
    addToBag: "ADD TO BAG",
},
{
    image_url: "https://bit.ly/3DBhHP0",
    brand: "Sangria",
    para: "Burgundy Sequinned Satin Saree",
    rs: 549,
    price: "Rs. 549",
    strikedoffprice: "Rs. 999",
    offer: "(65% OFF)",
    wishList: "Add to collection ♡",
    addToBag: "ADD TO BAG",
},
{
    image_url: "https://bit.ly/35vC57k",
    brand: "MFB",
    para: "Teal Blue Solid Accordian Pleat Ruffles Saree with Embroidered Blouse",
    rs: 599,
    price: "Rs. 599",
    strikedoffprice: "Rs. 1999",
    offer: "(65% OFF)",
    wishList: "Add to collection ♡",
    addToBag: "ADD TO BAG",
},
{
    image_url: "https://bit.ly/3uGJsBy",
    brand: "MFB",
    para: "Black Embroidered Ethnic Motifs A-Line Dress",
    rs: 159,
    price: "Rs. 159",
    strikedoffprice: "Rs. 199",
    offer: "(65% OFF)",
    wishList: "Add to collection ♡",
    addToBag: "ADD TO BAG",
},
{
    image_url: "https://bit.ly/3v7Vmor",
    brand: "MFB",
    para: "Women Beige Printed Shirt Dress",
    rs: 879,
    price: "Rs. 879",
    strikedoffprice: "Rs. 1699",
    offer: "(65% OFF)",
    wishList: "Add to collection ♡",
    addToBag: "ADD TO BAG",
},
{
    image_url: "https://bit.ly/3wWha8K",
    brand: "MFB",
    para: "Women Beige Printed Shirt Dress",
    rs: 1049,
    price: "Rs. 1049",
    strikedoffprice: "Rs. 2599",
    offer: "(65% OFF)",
    wishList: "Add to collection ♡",
    addToBag: "ADD TO BAG",
},
{
    image_url: "https://bit.ly/37bUbfj",
    brand: "Sngria",
    para: "Beige & Gold-Toned Floral Embroidered & Sequinned Box Clutches",
    rs: 749,
    price: "Rs. 749",
    strikedoffprice: "Rs. 1599",
    offer: "(65% OFF)",
    wishList: "Add to collection ♡",
    addToBag: "ADD TO BAG",
},
{
    image_url: "https://bit.ly/3iX4lTz",
    brand: "Nayo",
    para: "Gold-Plated Clustered Pearls Cuff Bracelet",
    rs: 554,
    price: "Rs. 554",
    strikedoffprice: "Rs. 1599",
    offer: "(65% OFF)",
    wishList: "Add to collection ♡",
    addToBag: "ADD TO BAG",
},
{
    image_url: "https://bit.ly/3wXwlP7",
    brand: "Nayo",
    para: "Gold-Toned & White Kundan & Pearl Studded Ring Bracelet",
    rs: 949,
    price: "Rs. 949",
    strikedoffprice: "Rs. 2599",
    offer: "(65% OFF)",
    wishList: "Add to collection ♡",
    addToBag: "ADD TO BAG",
},
{
    image_url: "https://bit.ly/3NEADRn",
    brand: "Nayo",
    para: "Women Silver-Toned Oxidised Cuff Bracelet",
    rs: 623,
    price: "Rs. 623",
    strikedoffprice: "Rs. 2599",
    offer: "(65% OFF)",
    wishList: "Add to collection ♡",
    addToBag: "ADD TO BAG",
},
{
    image_url: "https://assets.myntassets.com/f_webp,dpr_1.5,q_60,w_210,c_limit,fl_progressive/assets/images/11715910/2020/12/9/9442c1af-94fd-4c60-b9c8-044ed39535ec1607497230477-Rubans-Women-Silver-Plated-Oxidised-Elasticated-Bracelet-485-1.jpg",
    brand: "Yoke",
    para: "Women Silver-Plated Oxidised Elasticated Bracelet",
    rs: 899,
    price: "Rs. 899",
    strikedoffprice: "Rs. 2999",
    offer: "(65% OFF)",
    wishList: "Add to collection ♡",
    addToBag: "ADD TO BAG",
},
];

var collections = JSON.parse(localStorage.getItem("collections")) || {
    "Traditional": [],
    "Summer": [],
    "Myboard": [],
    "Wedding": []
};

var collabClosets = JSON.parse(localStorage.getItem("collabClosets")) || {};

window.addEventListener('load', function () {
    displayPage(womensData);
    populateCollectionDropdown();
    populateCollabDropdown();
});

function displayPage(womensData) {
    document.getElementById("container").innerHTML = "";

    womensData.map(function (element) {
        var box = document.createElement("div");

        var img = document.createElement("img");
        img.src = element.image_url;
        img.style.cursor = "pointer";  // Set cursor to pointer for the image to indicate it is clickable

        // Add click event listener to the image
        img.addEventListener("click", function () {
            window.location.href = 'yourNewPage.html'; // Change to your target page URL
        });

        var contentBox = document.createElement("div");
        contentBox.setAttribute("class", "contentBox");

        var brand = document.createElement("h4");
        brand.textContent = element.brand;

        var para = document.createElement("p");
        para.textContent = element.para;

        var mix = document.createElement("div");
        mix.setAttribute("class", "mixbox");

        var price = document.createElement("p");
        price.textContent = element.price;

        var strikeprice = document.createElement("p");
        strikeprice.textContent = element.strikedoffprice;
        strikeprice.setAttribute("class", "strikep");

        var offer = document.createElement("p");
        offer.textContent = element.offer;
        offer.setAttribute("class", "offerp");

        mix.append(price, strikeprice, offer);

        var wishList = document.createElement("p");
        wishList.setAttribute("class", "wishListp");
        wishList.textContent = element.wishList;
        wishList.style.cursor = "pointer";

        wishList.addEventListener("click", debounce(function () {
            openCollectionModal(element);
        }, 300));

        var addToBag = document.createElement("p");
        addToBag.setAttribute("class", "addToBagp");
        addToBag.textContent = element.addToBag;
        addToBag.style.cursor = "pointer";

        addToBag.addEventListener("click", function (event) {
            event.stopPropagation();  // Prevent event from bubbling up to the container
            addToBaglist(element);
            addToBag.innerText = "ADDED TO BAG";
        });

        contentBox.append(brand, para, mix, wishList, addToBag);
        box.append(img, contentBox);

        document.querySelector("#container").append(box);
    });
}


function openCollectionModal(item) {
    var modal = document.getElementById("collection-modal");
    modal.style.display = "block";
    localStorage.setItem("currentItem", JSON.stringify(item));

    document.getElementById("add-to-collection-btn").onclick = function () {
        var collectionName = document.getElementById("collection-dropdown").value;
        if (collectionName) {
            addToCollection(item, collectionName);
            modal.style.display = "none";
        }
    };

    document.getElementById("add-to-collab-btn").onclick = function () {
        var collabName = document.getElementById("collab-dropdown").value;
        if (collabName) {
            addToCollabCloset(item, collabName);
            modal.style.display = "none";
        }
    };

    document.getElementById("create-collab-btn").onclick = function () {
        var newCollabName = document.getElementById("new-collab-name").value.trim();
        if (newCollabName) {
            createCollabCloset(newCollabName);
            addToCollabCloset(item, newCollabName);
            modal.style.display = "none";
        }
    };
}

function addToCollection(item, collectionName) {
    if (!collections[collectionName]) {
        collections[collectionName] = [];
    }
    collections[collectionName].push(item);
    localStorage.setItem("collections", JSON.stringify(collections));
    alert(`Item added to ${collectionName.split('-')[0]} collection`);
}

function addToCollabCloset(item, collabName) {
    if (!collabClosets[collabName]) {
        collabClosets[collabName] = [];
    }
    collabClosets[collabName].push(item);
    localStorage.setItem("collabClosets", JSON.stringify(collabClosets));
    alert(`Item added to ${collabName} collab closet`);
}

function createCollabCloset(collabName) {
    if (!collabClosets[collabName]) {
        collabClosets[collabName] = [];
        localStorage.setItem("collabClosets", JSON.stringify(collabClosets));
        populateCollabDropdown();
        alert(`Collab Closet ${collabName} created`);
    } else {
        alert("Collab Closet already exists");
    }
}

function addToBaglist(element) {
    var bagList = JSON.parse(localStorage.getItem("BagListObj")) || [];
    bagList.push(element);
    localStorage.setItem("BagListObj", JSON.stringify(bagList));
}

document.getElementById("create-collection-btn").addEventListener("click", function () {
    var user = sessionStorage.getItem('user');
    var newCollectionName = document.getElementById("new-collection-name").value.trim();
    if (newCollectionName && !collections[newCollectionName]) {
        collections[newCollectionName + "-" + user] = [];
        localStorage.setItem("collections", JSON.stringify(collections));
        populateCollectionDropdown();
        alert(`Collection ${newCollectionName} created`);
    } else {
        alert("Collection already exists or invalid name");
    }
});

function populateCollectionDropdown() {
    var collectionDropdown = document.getElementById("collection-dropdown");
    collectionDropdown.innerHTML = "";

    for (var collectionName in collections) {
        var option = document.createElement("option");
        option.value = collectionName;
        option.text = collectionName.split('-')[0];
        collectionDropdown.appendChild(option);
    }
}

function populateCollabDropdown() {
    var collabDropdown = document.getElementById("collab-dropdown");
    collabDropdown.innerHTML = "";

    for (var collabName in collabClosets) {
        var option = document.createElement("option");
        option.value = collabName;
        option.text = collabName;
        collabDropdown.appendChild(option);
    }
}

document.getElementById("land").addEventListener("click", function () {
    window.location.href = "/LandingPage/index.html";
});

var modal = document.getElementById("collection-modal");
var span = document.getElementsByClassName("close")[0];

span.onclick = function () {
    modal.style.display = "none";
}

window.onclick = function (event) {
    if (event.target == modal) {
        modal.style.display = "none";
    }
}

window.ondblclick = function () {
    modal.style.display = "none";
}

function debounce(func, wait) {
    let timeout;
    return function (...args) {
        clearTimeout(timeout);
        timeout = setTimeout(() => func.apply(this, args), wait);
    };
}
